package net.ccbluex.liquidbounce.features.module.modules.exploit.disablermodes.verus

import net.ccbluex.liquidbounce.features.module.modules.exploit.disablermodes.DisablerMode
import net.ccbluex.liquidbounce.utils.PacketUtils.sendPacket
import net.minecraft.init.Items
import net.minecraft.item.ItemStack
import net.minecraft.network.play.client.C08PacketPlayerBlockPlacement

/*
* Working on Verus: b3898
* Tested on: anticheat-test.com, eu.loysia.cn
*
* Disables most Fly checks on the Verus Anticheat
* Allowing for slow Vanilla fly and fast onGround speeds
*/

object VerusFly : DisablerMode("VerusFly") {
    private var dontPlaceOnAttack = true
    override fun onUpdate() {
        if (dontPlaceOnAttack) {
            val pos = mc.thePlayer.position.add(0.0, -1.5, 0.0)
            sendPacket(
                C08PacketPlayerBlockPlacement(
                    pos,
                    1,
                    ItemStack(Items.water_bucket),
                    0F,
                    0.5F + Math.random().toFloat() * 0.44F,
                    0F
                )
            )

        }
        dontPlaceOnAttack = true
    }

    override fun onAttack() {
        dontPlaceOnAttack = false
    }
}