<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Alt Manager</title>
    <style>
        *:focus {
            outline: none;
        }

        .SearchBar {
            font-size: 22px;
            padding-left: 5%;
            position: absolute;
            width: 50%;
            height: 70%;
            border: thick none rgb(70, 119, 255);
            border-bottom-style: solid;
            left: 2%;
            top: 5%;
        }

        .SearchBarImage {
            position: absolute;
            width: 1%;
            height: 70%;
            left: 3%;
            z-index: 30;
            top: 20.5%;
        }

        .SearchBarConfigureImage {
            position: absolute;
            width: 1%;
            height: 70%;
            right: 50%;
            z-index: 30;
            top: 19%;
        }

        .checkbox1 {
            width: 5%;
            height: 5%;
            position: absolute;
            left: 15.5%;
            bottom: 32.5%
        }

        .checkbox2 {
            font-size: 18px;
            width: 5%;
            height: 5%;
            position: absolute;
            left: 25%;
            bottom: 32.5%
        }

        .checkbox5 {
            width: 20%;
            height: 20%;
            position: absolute;
            top: 30%;
            left: 45%;
        }

        .checkbox6 {
            font-size: 18px;
            width: 10%;
            height: 75%;
            position: absolute;
            text-align: left;
            top: 40%;
            left: 57%;
        }

        .checkbox7 {
            width: 20%;
            height: 20%;
            position: absolute;
            top: 30%;
            left: 57%;
        }

        .authType {
            border-style: solid;
            border-top-left-radius: 8px;
            border-top-right-radius: 8px;
            font-size: 25px;
            text-align: center;
            width: 10%;
            background-color: rgba(0, 0, 0, 0.8);
            height: 50%;
            position: absolute;
            top: 30%;
            right: 5%;
        }

        .checkbox8 {
            font-size: 18px;
            width: 10%;
            height: 75%;
            position: absolute;
            text-align: left;
            top: 40%;
            left: 69%;
        }

        * {
            cursor: default !important;
            font-family: "Montserrat", sans-serif;
            user-select: none;
            box-sizing: border-box;
            color: white;
        }

        body {
            background-image: url("img/background.png");
            background-size: cover;
            height: 100vh;
            width: 100vw;
            overflow: scroll;
        }

        #buttongrid {
            display: grid;
            top: 150px;
            grid-auto-rows: max-content;
            row-gap: 5px;
        }

        .wrapper {
            position: relative;
            height: 100%;
            grid-gap: 30px;
            margin-left: 60px;
            margin-right: 60px;
        }

        #title1 {
            text-align: center;
            font-size: 56px;
        }

        .loginScreen {
            position: absolute;
            top: 15%;
            left: 35%;
            margin-left: auto;
            margin-right: auto;
            width: 30%;
            height: 70%;
            background-color: rgba(0, 0, 0, 0.3);
        }

        .auth {
            padding-top: 5%;
            padding-left: 15%;
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            position: absolute;
            top: 15%;
            left: 5%;
            width: 90%;
            height: 20%;
            background-color: rgba(0, 0, 0, 0.5);
        }

        .theAlteningGrid {
            display: grid;
            grid-auto-raw: 2fr;
            position: absolute;
            top: 40%;
            left: 17.5%;
            width: 80%;
            height: 20%;
        }

        .theAlteningButton {
            z-index: 0;
            opacity: 0;
        }

        .microsoftButton {
            display: grid;
            grid-auto-raw: 2fr;
            position: absolute;
            top: 40%;
            left: 17.5%;
            width: 80%;
            height: 20%;
            z-index: 0;
            opacity: 0;
        }

        .theAlteningText {
            position: relative;
            height: 80%;
            width: 80%;
            text-align: center;
            font-size: 30px;
            background-color: rgba(0, 0, 0, 0.5);
        }

        .theAlteningText2 {
            position: absolute;
            height: 10%;
            top: 17%;
            width: 100%;
            text-align: center;
            font-size: 30px;
            background-color: rgba(0, 0, 0, 0.5);
        }

        .theAlteningButton1 {
            position: relative;
            height: 80%;
            width: 80%;
            text-align: center;
            font-size: 30px;
            background-color: rgba(90, 90, 255, 0.5);
        }

        .minecraftButton {
            display: grid;
            grid-auto-raw: 2fr;
            position: absolute;
            top: 40%;
            left: 17.5%;
            width: 80%;
            height: 20%;
            z-index: 20;
            opacity: 1;
        }

        .addScreen {
            z-index: 0;
            opacity: 0;
            position: absolute;
            top: 0%;
            left: 0%;
            width: 100%;
            height: 100%;
        }

        .button {
            background: linear-gradient(to left, rgba(0, 0, 0, .68) 50%, #4677ff 50%);
            background-size: 200% 100%;
            background-position: right bottom;
            will-change: background-position;
            transition: background-position .2s ease-out;
            width: 25%;
            height: 15%;
            border-radius: 6px;
            align-items: center;
            column-gap: 30px;
            position: absolute;
            left: 75%;
        }

        .scale {
            position: relative;
            height: 100%;
        }

        @media screen and (max-width: 1366px) {
            .scale {
                zoom: .5;
            }
        }

        @media screen and (max-width: 1024px) {
            .scale {
                zoom: .6;
            }
        }

        @media screen and (max-height: 1000px) {
            .scale {
                zoom: .9;
            }
        }

        @media screen and (max-height: 700px) {
            .scale {
                zoom: .6;
            }
        }

        @media screen and (max-height: 540px) {
            .scale {
                zoom: .5;
            }
        }

        input {
            border-radius: 6px;
            margin-top: 10px;
            margin-bottom: 10px;
            border-color: white;
            background-color: rgba(0, 0, 0, 0.68);
            color: white;
            border: none;
            height: 40px;
        }

        button {
            border-radius: 6px;
            background-color: rgba(0, 0, 0, 0);
            min-width: 80px;
            height: 30px;
            color: white;
            border: none;
        }

        td {
            padding: 10px;
        }

        .footinit {
            display: block;
            position: absolute;
            bottom: 0;
            width: 100%;
            text-align: right;
            height: 100px;
        }

        .footinitMulti {
            left: 3%;
            display: block;
            position: absolute;
            bottom: 0;
            width: 80%;
            text-align: left;
            height: 100px;
        }

        .butto {
            height: 75px;
            width: 250px;
            font-size: 26px;
            background-color: rgba(0, 0, 0, 0.68);
            border-radius: 6px;
            margin-right: 10px;
            background: linear-gradient(to left, rgba(0, 0, 0, .68) 50%, #4677ff 50%);
            background-size: 200% 100%;
            background-position: right bottom;
            will-change: background-position;
            transition: background-position .2s ease-out;
        }

        .closeButto {
            height: 75px;
            width: 75px;
            border-radius: 6px;
            margin-right: 10px;
        }

        .butto:hover, .button:hover {
            background-position: left bottom;
        }

        .accounts {
            position: absolute;
            top: 30%;
            right: 0;
            width: 100%;
            height: 55%;
            background-color: rgba(0, 0, 0, 0.68);
            border-radius: 6px;
            overflow-y: scroll;
        }

        .removeButtons {
            filter: blur(0px);
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 10;
        }

        .closeButton {
            position: absolute;
            top: 20px;
            right: 20px;
        }

        .authButton {
            z-index: 30;
            height: 70%;
            width: 10%;
            background-color: rgba(0, 0, 0, 255);
            text-align: center;
            font-size: 10px;
        }

        .addButton {
            position: absolute;
            z-index: 30;
            width: 70%;
            height: 10%;
            top: 70%;
            left: 15%;
            font-size: 30px;
            background-color: rgba(90, 90, 255, 255);
        }

        .generateButto {
            position: absolute;
            width: 10%;
            height: 10%;
            left: 85%;
            top: 50%;
            background-color: rgba(90, 90, 255, 255);
        }

        .clipboardButton {
            position: absolute;
            width: 70%;
            height: 10%;
            left: 15%;
            top: 85%;
            font-size: 30px;
            background-color: rgba(0, 0, 0, 255);
        }

        .accountsButton {
            position: relative;
        }

        #face {
            width: 32px;
            height: 32px;
        }

        .accountFace {
            hidth: 32px;
            height: 32px;
        }
    </style>
    <script>
        let authService = 0;
        const random = (length = 8) => {
            // Declare all characters
            let chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';

            // Pick characers randomly
            let str = '';
            for (let i = 0; i < length; i++) {
                str += chars.charAt(Math.floor(Math.random() * chars.length));
            }

            return str;

        };

        function toggleOverlay() {
            let addScreen = document.querySelector(".addScreen");
            let removeButtons = document.querySelector(".removeButtons");
            if (addScreen.style.zIndex === '10') {
                addScreen.style.zIndex = 0;
                addScreen.style.opacity = 0;
                removeButtons.style.zIndex = 10;
                removeButtons.style.filter = "blur(0px)";
            } else {
                addScreen.style.zIndex = 10;
                addScreen.style.opacity = 1;
                removeButtons.style.zIndex = 0;
                removeButtons.style.filter = "blur(20px)";
            }
        }

        function addDynamically() {
            switch (authService) {
                case 0: {
                    newCrackedAccount();
                    break;
                }
                case 1: {
                    break;
                }
                case 2: {
                    newAlteningAccount()
                    break;
                }
            }
        }

        function switchAuth(num) {
            let theAlteningScreen = document.querySelector(".theAlteningButton");
            let microsoftButton = document.querySelector(".microsoftButton");
            let minecraftButton = document.querySelector(".minecraftButton");
            switch (num) {
                case 0: {
                    authService = 0;
                    minecraftButton.style.opacity = 1;
                    minecraftButton.style.zIndex = 20;
                    microsoftButton.style.opacity = 0;
                    microsoftButton.style.zIndex = 0;
                    theAlteningScreen.style.opacity = 0;
                    theAlteningScreen.style.zIndex = 0;
                    break;
                }
                case 1: {
                    authService = 1;
                    minecraftButton.style.opacity = 0;
                    minecraftButton.style.zIndex = 0;
                    microsoftButton.style.opacity = 1;
                    microsoftButton.style.zIndex = 20;
                    theAlteningScreen.style.opacity = 0;
                    theAlteningScreen.style.zIndex = 0;
                    break;
                }
                case 2: {
                    authService = 2;
                    minecraftButton.style.opacity = 0;
                    minecraftButton.style.zIndex = 0;
                    microsoftButton.style.opacity = 0;
                    microsoftButton.style.zIndex = 0;
                    theAlteningScreen.style.opacity = 1;
                    theAlteningScreen.style.zIndex = 20;
                    break;
                }
            }
        }

        function setRandomUsername() {
            document.getElementById('username').value = random();
        }

        function successMicrosoft(microsoftAccount) {
            console.log("Logged in with Microsoft");
            document.getElementById('response').innerText = "Logged in with Microsoft";
        }

        function errorMicrosoft(error) {
            console.log(error);
            document.getElementById('response').innerText = error;
        }

        function updateAccountList() {
            let accountsDiv = document.getElementById('accounts');
            let accounts = client.getAccountManager().getAccounts().iterator();

            // Clear the div
            accountsDiv.innerHTML = "";

            // Add all accounts
            console.log(accounts);
            var i = 0;
            while (accounts.hasNext()) {
                let account = accounts.next();
                console.log(account.getType());
                console.log(account.getName());

                let row = document.createElement('tr');
                let head = document.createElement('td')
                let type = document.createElement('td');
                let name = document.createElement('td');
                let button = document.createElement('td');
                let uuid = client.getSessionService().uuid();
                console.log(uuid);
                let faceUrl = client.getSessionService().getFaceUrlByUUID(uuid);
                console.log(faceUrl)
                head.innerHTML =
                    "<img src=\"" + faceUrl + "\" alt=\"\">"

                type.innerText = account.getType();
                name.innerText = account.getName();
                button.innerHTML =
                    "<button onclick='loginAccount(\"" + i + "\")'>" +
                    "<img src=\"img/account/check.svg\" alt=\"\">" +
                    "</button>" +
                    "<button onclick='deleteAccount(\"" + i + "\")'>" +
                    "<img src=\"img/account/delete.svg\" alt=\"\">" +
                    "</button>" +
                    "<button onclick='copyAccount(\"" + i + "\")'>" +
                    "<img src=\"img/account/copy.svg\" alt=\"\">" +
                    "</button>" +
                    "<button onclick='favoriteAccount(\"" + i + "\")'>" +
                    "<img src=\"img/account/star.svg\" alt=\"\">" +
                    "</button>" +
                    "<button onclick='editAccount(\"" + i + "\")'>" +
                    "<img src=\"img/account/edit.svg\" alt=\"\">" +
                    "</button>" +
                    "<button onclick='idk(\"" + i + "\")'>" +
                    "<img src=\"img/account/play.svg\" alt=\"\">" +
                    "</button>";
                button.className = "accountsButton";
                head.className = "accountFace"
                row.append(head)
                row.appendChild(type);
                row.appendChild(name);
                row.appendChild(button);
                accountsDiv.appendChild(row);
                i++;
            }
        }

        function updateAccountData() {
            const username = client.getSessionService().getUsername();
            const faceUrl = client.getSessionService().getFaceUrl();
            const accountType = client.getSessionService().getAccountType();
            const location = client.getSessionService().getLocation();

            document.getElementById('sessionUsername').innerText = username;
            document.getElementById('face').src = faceUrl;
            document.getElementById('accountType').innerText = accountType;
            document.getElementById('location').innerText = location;
        }

        window.onload = function () {
            updateAccountList();
            updateAccountData();

            // Set altening token
            console.log(client.getAccountManager().getAlteningApiToken());
            document.getElementById('apitoken').value = client.getAccountManager().getAlteningApiToken();
        };

        function newCrackedAccount() {
            let username = document.getElementById('username').value;

            if (username === "") {
                document.getElementById('response').innerText = "Please enter a username";
                return;
            }

            client.getAccountManager().newCrackedAccount(username);
            updateAccountList();
        }

        function newAlteningAccount() {
            let token = document.getElementById('token').value;

            if (token === "") {
                document.getElementById('response').innerText = "Please enter a token";
                return;
            }

            client.getAccountManager().newAlteningAccount(token);
            updateAccountList();
        }

        function newMicrosoftAccount() {
            client.getAccountManager().newMicrosoftAccount(successMicrosoft, errorMicrosoft);
            updateAccountList();
        }

        function generateAlteningAccount() {
            let apiToken = document.getElementById('apitoken').value;

            if (apiToken === "") {
                document.getElementById('response').innerText = "Please enter an API token";
                return;
            }

            client.getAccountManager().setAlteningApiToken(apiToken);
            console.log("Generating new altening account using token: " + client.getAccountManager().getAlteningApiToken());
            client.getAccountManager().generateNewAlteningAccount(apiToken);
            updateAccountList();
        }

        function loginAccount(id) {
            client.getAccountManager().loginAccount(parseInt(id));
            updateAccountData();
        }

        function deleteAccount(id) {
            var account = client.getAccountManager().getAccounts().remove(parseInt(id));
            updateAccountList();

            document.getElementById('response').innerText = "Deleted account: " + account.getName();
        }
    </script>
</head>
<body>
<div class="scale">
    <div class="removeButtons">
        <div class="wrapper">
            <picture class="SearchBarImage">
                <source media="(orientation: portrait)"
                        srcset="img/search.svg">
                <img alt="" src="img/search.svg">
            </picture>
            <picture class="SearchBarConfigureImage">
                <source media="(orientation: portrait)"
                        srcset="img/settings.svg">
                <img alt="" src="img/settings.svg">
            </picture>
            <div class="theAlteningText2">
                <input class="SearchBar" id="" placeholder="Name" src="img/search.svg" type="text">

                <input checked class="checkbox5" name="" type="checkbox"/>
                <h1 class="checkbox6"> Favourite only</h1>

                <input checked class="checkbox7" name="" type="checkbox"/>
                <h1 class="checkbox8"> Premium only</h1>
                <select class="authType">
                    <option value="">Type</option>
                    <option value="microsoft">Microsoft</option>
                    <option value="altening">Altening</option>
                    <option value="cracked">Cracked</option>
                </select>
            </div>
            <div id="buttongrid">
                <picture>
                    <source media="(orientation: portrait)"
                            srcset="img/lb-logo.svg">
                    <img alt="" src="img/lb-logo.svg">
                </picture>
                <div class="button">
                    <img alt="head" class="head" id="face"/>
                    <div class="username" id="sessionUsername"></div>
                    <div class="accountType" id="accountType"></div>
                    <div class="location" id="location"></div>
                </div>

                <div class="accounts" id="accounts"></div>
                <div id="response"></div>
            </div>

        </div>
        <footer>
            <div class="footinit">
                <button class="butto" onclick="pages.open('title', screen)">
                    <picture>
                        <source media="(orientation: portrait)"
                                srcset="img/back.svg">
                        <img alt="" src="img/back.svg">
                    </picture>
                    Back
                </button>
            </div>
            <div class="footinitMulti">
                <button class="butto" onclick="toggleOverlay()">
                    <picture>
                        <source media="(orientation: portrait)"
                                srcset="img/add.svg">
                        <img alt="" src="img/add.svg">
                    </picture>
                    Add
                </button>
                <button class="butto" onclick="pages.open('title', screen)">
                    <picture>
                        <source media="(orientation: portrait)"
                                srcset="img/clipboard.svg">
                        <img alt="" src="img/clipboard.svg">
                    </picture>
                    Clipboard
                </button>
                <button class="butto" onclick="pages.open('title', screen)">
                    <picture>
                        <source media="(orientation: portrait)"
                                srcset="img/import.svg">
                        <img alt="" src="img/import.svg">
                    </picture>
                    Import
                </button>
                <button class="butto" onclick="pages.open('title', screen)">
                    <picture>
                        <source media="(orientation: portrait)"
                                srcset="img/random.svg">
                        <img alt="" src="img/random.svg">
                    </picture>
                    Random
                </button>
                <button class="butto" onclick="pages.open('title', screen)">
                    <picture>
                        <source media="(orientation: portrait)"
                                srcset="img/check.svg">
                        <img alt="" src="img/check.svg">
                    </picture>
                    Check
                </button>
            </div>
        </footer>
    </div>

    <div class="addScreen">
        <div class="loginScreen" id="loginScreen">
            <h1 id="title1">Login</h1>
            <div class="auth">
                <button class="authButton" onclick="switchAuth(0)">
                    <picture>
                        <source media="(orientation: portrait)"
                                srcset="img/minecraft.svg">
                        <img alt="" src="img/minecraft.svg">
                    </picture>
                    Minecraft
                </button>
                <button class="authButton" onclick="switchAuth(1)">
                    <picture>
                        <source media="(orientation: portrait)"
                                srcset="img/microsoft.svg">
                        <img alt="" src="img/microsoft.svg">
                    </picture>
                    Microsoft
                </button>
                <button class="authButton" onclick="switchAuth(2)">
                    <picture>
                        <source media="(orientation: portrait)"
                                srcset="img/thealtening.svg">
                        <img alt="" src="img/thealtening.svg">
                    </picture>
                    TheAltening
                </button>
            </div>

            <div class="minecraftButton">
                <input class="theAlteningText" id="username" placeholder="Name" type="text">
                <button class="theAlteningButton1" onclick="setRandomUsername()">
                    <picture>
                        <source media="(orientation: portrait)"
                                srcset="img/generate.svg">
                        <img alt="" src="img/generate.svg">
                    </picture>
                    Random
                </button>

            </div>

            <div class="microsoftButton">
                <button class="theAlteningButton1" onclick="newMicrosoftAccount()">
                    <picture>
                        <source media="(orientation: portrait)"
                                srcset="img/login.svg">
                        <img alt="" src="img/login.svg">
                    </picture>
                    Login using browser
                </button>
            </div>

            <div class="theAlteningButton">
                <div class="theAlteningGrid">
                    <input class="theAlteningText" id="token" placeholder="Account Token" type="text">
                    <input class="theAlteningText" placeholder="API Token" type="text">
                </div>

                <button class="generateButto" onclick="generateAlteningAccount()">
                    <picture>
                        <source media="(orientation: portrait)"
                                srcset="img/generate.svg">
                        <img alt="" src="img/generate.svg">
                    </picture>
                </button>
            </div>
            <input checked class="checkbox1" name="" type="checkbox"/>
            <h1 class="checkbox2"> Favourite</h1>

            <button class="addButton" onclick="addDynamically()">
                Add
            </button>
            <button class="clipboardButton" onclick="toggleOverlay()">
                Clipboard
            </button>
        </div>
        <div class="closeButton" id="closeButton">
            <button class="closeButto" onclick="toggleOverlay()">
                <picture>
                    <source media="(orientation: portrait)"
                            srcset="img/close.svg">
                    <img alt="" src="img/close.svg">
                </picture>
            </button>
        </div>
    </div>
</div>
</body>
</html>
